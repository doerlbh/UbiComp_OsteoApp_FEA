% analysis.m for experiment apr21
% Baihan Lin, Apr 2017

clear all; close all;
load('apr21.mat');
path=('/Users/DoerLBH/Dropbox/git/UbiComp_OsteoApp_FEA/raspberry_pi/osteoapp/apr21/out/');
system(['mkdir ' path]);

n_acc0_04_24_00_04_56 = max(acc0_04_24_00_04_56.');
n = int64(length(acc0_04_24_00_04_56) * 6 / 7);
max=0;
maxindex=0;
for m = 1:length(acc0_04_24_00_04_56)-n
    s=sum(n_acc0_04_24_00_04_56(m:m+n-1));
    if(s>max)
        max = s;
        maxindex = m;
    end
end

%     acc0_04_24_00_04_56


%%
p01 = n_acc0_04_24_00_04_56(maxindex:maxindex+n-1,1)./n_acc1_04_24_00_04_56(maxindex:maxindex+n-1,1);

figure(1)
set(gca,'FontSize',16)
plot(linspace(0,1000,n),p01)
xlabel('acc0/acc1');ylabel('frequency (Hz)')
title('acc0\_04\_24\_00\_04\_56 ');
filename = strcat(path, 'p01_04_24_00_04_56.png');
saveas(gcf, filename,'png');

figure(2)
set(gca,'FontSize',16)
plot(linspace(0,1000,n),acc0_04_24_00_04_56(maxindex:maxindex+n-1,1)); hold on
plot(linspace(0,1000,n),acc0_04_24_00_04_56(maxindex:maxindex+n-1,2)); hold on
plot(linspace(0,1000,n),acc0_04_24_00_04_56(maxindex:maxindex+n-1,3));
xlabel('acceleration');ylabel('frequency (Hz)')
title('acc0\_04\_24\_00\_04\_56 ');
filename = strcat(path, 'acc0_04_24_00_04_56.png');
saveas(gcf, filename,'png');


% plot(1:length(acc1_04_24_00_35_57(:,1)),acc1_04_24_00_35_57(:,1)); hold on
% plot(1:length(acc0_04_24_00_35_57(:,1)),acc0_04_24_00_35_57(:,1)); hold on

% plot(1:length(acc0_04_24_00_35_57(:,1)),acc1_04_24_00_35_57(:,3)./acc0_04_24_00_35_57(:,3)); hold on

% plot(1:length(acc1_04_24_00_35_57(:,1)),acc1_04_24_00_35_57(:,2)); hold on
% plot(1:length(acc1_04_24_00_35_57(:,1)),acc1_04_24_00_35_57(:,3))
